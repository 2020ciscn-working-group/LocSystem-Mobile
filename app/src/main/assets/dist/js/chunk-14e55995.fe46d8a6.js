(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14e55995"],{5928:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat"},[t.targetUser?s("Header",{attrs:{"is-left":!0,title:t.targetUser.targetName}}):t._e(),s("van-cell",{staticClass:"switch",style:{height:"50px","margin-top":"10px"},attrs:{center:"",title:"保密通讯密钥交换申请"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-button",{attrs:{color:"linear-gradient(to right, #4bb0ff, #6149f6)"},on:{click:function(e){return t.onNegoreq()}}},[t._v("更换密钥")])]},proxy:!0}])}),s("div",{staticClass:"container"},t._l(t.messageList,(function(e,a){return t.targetUser&&t.user?s("div",{key:a,staticClass:"content_wrap"},["other"==e.source?s("div",{staticClass:"left_msg"},[s("img",{attrs:{src:t.targetUser.avatar,alt:""}}),s("span",[t._v(t._s(e.message))])]):t._e(),"self"==e.source?s("div",{staticClass:"right_msg"},[s("span",[t._v(t._s(e.message))]),s("img",{attrs:{src:t.user.avatar,alt:""}})]):t._e()]):t._e()})),0),s("div",{staticClass:"footer_wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.msgValue,expression:"msgValue"}],attrs:{type:"text"},domProps:{value:t.msgValue},on:{input:function(e){e.target.composing||(t.msgValue=e.target.value)}}}),s("button",{attrs:{disabled:""==t.msgValue},on:{click:t.onsendMessage}},[t._v("发送")]),s("button",{on:{click:t.getMessage}},[t._v("拉取")])]),s("van-dialog",{attrs:{title:"收到授权申请","show-cancel-button":"",confirmButtonText:"同意",confirmButtonColor:"green",cancelButtonColor:"red",cancelButtonText:"拒绝",message:t.information},on:{confirm:t.Onconfirm,cancel:t.Oncancel},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1)},n=[],i=s("f984"),r={data:function(){return{msgValue:"",show:!1,messageList:[],json_str:"",information:"",user:{uid:this.$store.state.uid,avatar:""},targetUser:this.$store.state.target}},components:{Header:i["a"]},mounted:function(){console.log(this.targetUser),console.log(this.user.uid),window.pullmessage_success=this.pullmessage_success,window.chatItem_receieve=this.chatItem_receieve,window.accreq=this.accreq},methods:{onsendMessage:function(){$APP.sendMessage(this.msgValue,100,this.targetUser.targetuid);var t={message:this.msgValue,source:"self"};this.messageList.push(t),this.msgValue=""},getMessage:function(){$APP.pullmessage(this.targetUser.targetuid,this.user.uid)},pullmessage_success:function(){console.log("拉取成功")},chatItem_receieve:function(t){var e={message:t,source:"other"};this.messageList.push(e)},onNegoreq:function(){$APP.negoreq(this.targetUser.targetuid)},Onconfirm:function(){console.log("调用了确认事件"),$APP.acceptaccreq(this.json_str,this.$store.state.target.targetuid)},Oncancel:function(){console.log("调用了拒绝事件"),$APP.denide(this.json_str,this.$store.state.target.targetuid)},accreq:function(t){this.json_str=t;JSON.parse(t);this.information=JSON.stringify("accsee: "+this.accreq_json.accsee)+"\n"+JSON.stringify("hubuuid: "+this.accreq_json.hubuuid)+"\n"+JSON.stringify("info: "+this.accreq_json.info)+"\n"+JSON.stringify("time: "+this.accreq_json.info),this.show=!0}}},o=r,c=(s("9533"),s("4023")),u=Object(c["a"])(o,a,n,!1,null,"09c159d8",null);e["default"]=u.exports},9533:function(t,e,s){"use strict";var a=s("eb89"),n=s.n(a);n.a},eb89:function(t,e,s){}}]);
//# sourceMappingURL=chunk-14e55995.fe46d8a6.js.map