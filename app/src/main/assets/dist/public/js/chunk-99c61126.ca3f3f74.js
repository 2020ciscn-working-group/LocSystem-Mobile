(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99c61126"],{5928:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat"},[e.targetUser?s("Header",{attrs:{"is-left":!0,title:e.targetUser.targetName}}):e._e(),s("van-cell",{staticClass:"switch",style:{height:"50px","margin-top":"10px"},attrs:{center:"",title:"保密通讯密钥交换申请"},scopedSlots:e._u([{key:"right-icon",fn:function(){return[s("van-button",{attrs:{color:"linear-gradient(to right, #4bb0ff, #6149f6)"},on:{click:function(t){return e.onNegoreq()}}},[e._v("更换密钥")])]},proxy:!0}])}),s("div",{staticClass:"container"},e._l(e.messageList,(function(t,a){return e.targetUser&&e.user?s("div",{key:a,staticClass:"content_wrap"},["other"==t.source?s("div",{staticClass:"left_msg"},[s("img",{attrs:{src:e.imgsrc2,alt:""}}),s("span",[e._v(e._s(t.message))])]):e._e(),"self"==t.source?s("div",{staticClass:"right_msg"},[s("span",[e._v(e._s(t.message))]),s("img",{attrs:{src:e.imgsrc1,alt:""}})]):e._e()]):e._e()})),0),s("div",{staticClass:"footer_wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.msgValue,expression:"msgValue"}],attrs:{type:"text"},domProps:{value:e.msgValue},on:{input:function(t){t.target.composing||(e.msgValue=t.target.value)}}}),s("button",{attrs:{disabled:""==e.msgValue},on:{click:e.onsendMessage}},[e._v("发送")]),s("button",{on:{click:e.getMessage}},[e._v("拉取")])]),s("van-dialog",{attrs:{title:"收到授权申请","show-cancel-button":"",confirmButtonText:"同意",confirmButtonColor:"green",cancelButtonColor:"red",cancelButtonText:"拒绝",message:e.information},on:{confirm:e.Onconfirm,cancel:e.Oncancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},n=[],i=s("f984"),o={data:function(){return{msgValue:"",show:!1,messageList:[],accreq_json:{},imgsrc1:s("deaa"),imgsrc2:s("207f"),information:"",user:{uid:this.$store.state.uid,avatar:""},targetUser:this.$store.state.target}},components:{Header:i["a"]},mounted:function(){console.log(this.targetUser),console.log(this.user.uid),window.pullmessage_success=this.pullmessage_success,window.chatItem_receieve=this.chatItem_receieve,window.accreq=this.accreq},methods:{onsendMessage:function(){var e={message:this.msgValue,source:"self"};this.messageList.push(e),this.msgValue=""},getMessage:function(){$APP.pullmessage(this.targetUser.targetuid,this.user.uid)},pullmessage_success:function(){console.log("拉取成功")},chatItem_receieve:function(e){var t={message:e,source:"other"};this.messageList.push(t)},onNegoreq:function(){$APP.negoreq(this.targetUser.targetuid)},Onconfirm:function(){console.log("调用了确认事件"),$APP.acceptaccreq(this.json_str,this.$store.state.target.targetuid)},Oncancel:function(){console.log("调用了拒绝事件"),$APP.denide(this.json_str,this.$store.state.target.targetuid)},accreq:function(e){this.accreq_json=JSON.parse(e),this.information=JSON.stringify("accsee: "+this.accreq_json.accsee)+"\n"+JSON.stringify("hubuuid: "+this.accreq_json.hubuuid)+"\n"+JSON.stringify("info: "+this.accreq_json.info)+"\n"+JSON.stringify("time: "+this.accreq_json.time),this.show=!0}}},c=o,r=(s("a380"),s("9ca4")),u=Object(r["a"])(c,a,n,!1,null,"f3a3d732",null);t["default"]=u.exports},"80c5":function(e,t,s){},a380:function(e,t,s){"use strict";var a=s("80c5"),n=s.n(a);n.a},deaa:function(e,t,s){e.exports=s.p+"public/img/me.044b0a53.png"}}]);
//# sourceMappingURL=chunk-99c61126.ca3f3f74.js.map